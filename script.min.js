// ==UserScript==
// @name         1337 Search Generator + Subtitle Generator for TVTime
// @version      1.1
// @description  this script create a href element inside www.tvtime.com to access subtitle website for each episode directly in www.legendario.org
// @author       github.com/luandr | gitlab.com/luandr
// @match        https://www.tvtime.com/*
// @require https://code.jquery.com/jquery-3.4.1.min.js
// ==/UserScript==

!function(){"use strict";String.prototype.replaceArray=function(e,t){let r=this;for(let n=0;n<e.length;n++)r=r.replace(new RegExp(e[n],"g"),t[n]);return r},String.prototype.simplyReplace=function(e,t){let r=this;for(let n=0;n<e.length;n++)r=r.replace(e[n],t[n]);return r};const e=["Churchill's Secret Agents: The New Recruits"],t=["S.H.I.E.L.D.","& "," ","'"],r=["s-h-i-e-l-d","","-","-"],n=["marvel-s","dc-s"],a=["marvels","dcs"],l=["-(2014)"],s=[""];$("#to-watch > ul > li > .episode-details").each((c,o)=>{let i=/(S\d{2}E\d{2})/g.exec($(o).find("h2").text())[1].toLowerCase();const p=$(o).find("a:nth-child(2)");let d=p.text().replace(/(S\d{2}E\d{2})/g,"");if(console.info(d),e.indexOf(d)<0){d=d.replaceArray(t,r).toLowerCase(),console.info(d);const e=d.replaceArray(n,a);d=d.simplyReplace(l,s),p.text(p.text().substring(0,26)),$(o).find("a:nth-child(2)").parent().css("height",64).append(`<br><a href="https://legendario.org/legenda/${d}-${i}" class="secondary-link" target="_blank">Legenda</a>`).append(`<br><a href="https://www.1337x.to/search/${e}+${i}+1080p/1/" target="_blank" class="secondary-link">Procurar Torrent</a>`)}})}();
